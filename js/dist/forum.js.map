{"version":3,"sources":["webpack://@justoverclock/igdb-api/webpack/bootstrap","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['forum/app']\"","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['common/extend']\"","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['components/LinkButton']\"","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['components/Page']\"","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['common/helpers/listItems']\"","webpack://@justoverclock/igdb-api/external \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@justoverclock/igdb-api/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@justoverclock/igdb-api/./src/forum/components/upcomingGames.js","webpack://@justoverclock/igdb-api/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@justoverclock/igdb-api/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_setPrototypeOf","setPrototypeOf","__proto__","upcomingGames","subClass","superClass","constructor","oncreate","vnode","app","setTitle","translator","trans","setTitleCount","RawgKeyPage","forum","attribute","div","document","getElementById","convertToTwoDigits","digit","toString","length","date","Date","year","getFullYear","month","getMonth","day","getDate","fetch","then","response","json","ok","Promise","reject","data","redraw","results","map","game","LinkMe","slug","card","createElement","setAttribute","title","textContent","appendChild","background_image","image","src","addEventListener","window","open","released","split","push","shift","join","releaseDate","innerText","clip","vid","controls","load","vidSrc","error","console","log","style","textAlign","margin","innerHTML","view","className","IndexPage","hero","listItems","sidebarItems","toArray","id","Page","initializers","add","routes","path","component","extend","DiscussionComposer","items","class","navItems","href","route","icon","DiscussionHero","RawgKey","discGameTitle","this","attrs","discussion","session","user","undefined","Error","statusText","gameDet","score","metacritic","bgGame","description_raw","remove","developers","genres","translate","metacritic_url","target","rel","website","ratings","count"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/components/DiscussionHero'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['forum/components/DiscussionComposer'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import app from 'flarum/forum/app';\r\nimport Page from 'flarum/components/Page';\r\nimport IndexPage from 'flarum/forum/components/IndexPage';\r\nimport listItems from 'flarum/common/helpers/listItems';\r\n\r\nexport default class upcomingGames extends Page {\r\n\r\n    oncreate(vnode) {\r\n        super.oncreate(vnode);\r\n        app.setTitle(app.translator.trans('justoverclock-igdb-api.forum.pagetitle'));\r\n        app.setTitleCount(0);\r\n\r\n        const RawgKeyPage = app.forum.attribute('justoverclock-igdb-api.RawgApiKey');\r\n        const div = document.getElementById('showGamesList');\r\n        const convertToTwoDigits = (digit) => {\r\n            if (digit.toString().length < 2) {\r\n                digit = '0' + digit.toString();\r\n            }\r\n            return digit;\r\n        };\r\n        const date = new Date();\r\n        const year = date.getFullYear();\r\n        const month = convertToTwoDigits(date.getMonth() + 1); // getMonth() returns previous month\r\n        const day = convertToTwoDigits(date.getDate());\r\n        const today = year + '-' + month + '-' + day;\r\n        const nextYear = year + 1 + '-' + month + '-' + day;\r\n        const url = `https://api.rawg.io/api/games?dates=${today},${nextYear}&ordering=-added&page_size=12&key=` + RawgKeyPage;\r\n\r\n        const handleResponse = (response) => {\r\n            return response.json().then(function (json) {\r\n                if (response.ok) {\r\n                    return json;\r\n                } else {\r\n                    return Promise.reject(response);\r\n                }\r\n            });\r\n        };\r\n\r\n        fetch(url)\r\n            .then(handleResponse)\r\n            .then(function (data) {\r\n                m.redraw();\r\n                data.results.map((game) => {\r\n                    const LinkMe = 'https://rawg.io/games/' + game.slug;\r\n\r\n                    const card = document.createElement('div');\r\n                    card.setAttribute('class', 'cardupGames');\r\n                    const title = document.createElement('h2');\r\n                    title.setAttribute('class', 'mainGameTitle');\r\n                    title.setAttribute('title', game.name);\r\n                    title.textContent = game.name;\r\n                    card.appendChild(title);\r\n\r\n                    if (game.background_image) {\r\n                        const image = document.createElement('img');\r\n                        image.setAttribute('class', 'imgGame');\r\n                        image.setAttribute('alt', game.name);\r\n                        image.setAttribute('title', game.name);\r\n                        image.src = game.background_image;\r\n                        image.addEventListener('click', () => (window.open(LinkMe)));\r\n                        image.setAttribute('style', 'cursor: pointer;');\r\n                        card.appendChild(image);\r\n                    }\r\n\r\n                    if (game.released) {\r\n                        let released = game.released;\r\n                        released = released.split('-');\r\n                        released.push(released.shift());\r\n                        released = released.join('/');\r\n                        const releaseDate = document.createElement('h4');\r\n                        releaseDate.setAttribute('class', 'relDate');\r\n                        releaseDate.innerText = app.translator.trans('justoverclock-igdb-api.forum.relDatePage') + ': ' + released;\r\n                        card.appendChild(releaseDate);\r\n                    }\r\n\r\n                    if (game.clip) {\r\n                        const vid = document.createElement('video');\r\n                        vid.controls = true;\r\n                        vid.setAttribute('width', '100%');\r\n                        vid.setAttribute('height', '135px');\r\n                        vid.load();\r\n                        const vidSrc = document.createElement('source');\r\n                        vidSrc.src = game.clip.clip;\r\n                        vid.appendChild(vidSrc);\r\n                        card.appendChild(vid);\r\n                    }\r\n\r\n                    div.appendChild(card);\r\n                });\r\n            })\r\n            .catch(function (error) {\r\n                console.log('error', error);\r\n                const card = document.createElement('div');\r\n                card.style.textAlign = 'center';\r\n                card.style.margin = '0 auto';\r\n                card.innerHTML = app.translator.trans('justoverclock-igdb-api.forum.noConnection');\r\n                div.appendChild(card);\r\n            });\r\n    }\r\n\r\n    view() {\r\n        const date = new Date();\r\n        const year = date.getFullYear();\r\n        return (\r\n            <div className=\"gamesPage\">\r\n                {IndexPage.prototype.hero()}\r\n                <div className=\"container\">\r\n                    <div className=\"sideNavContainer\">\r\n                        <nav className=\"nav IndexPage-nav sideNav\">\r\n                            <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\r\n                        </nav>\r\n                        <div className=\"content sideNavOffset\">\r\n                            <h1 className=\"gamePageTitle\">\r\n                                {app.translator.trans('justoverclock-igdb-api.forum.pageTitle')} - ({year})\r\n                            </h1>\r\n                            <p className=\"pagedescription\">{app.translator.trans('justoverclock-igdb-api.forum.pageText')}</p>\r\n                            <div className=\"containerGames\" id=\"showGamesList\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\nimport LinkButton from 'flarum/components/LinkButton';\nimport upcomingGames from './components/upcomingGames';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\n\napp.initializers.add('justoverclock/igdb-api', () => {\n    app.routes.upcomingGames = {\n        path: '/games',\n        component: upcomingGames,\n    };\n    extend(DiscussionComposer.prototype, 'headerItems', function (items) {\n        if (app.forum.attribute('justoverclock-igdb-api.composerAlert') === true) {\n            items.add(\n                'gameAlertBox',\n                <div className=\"Alert gameAlert\">\n                    <div className=\"Alert-body gameAlertBody\">\n                        <h4>{app.translator.trans('justoverclock-igdb-api.forum.game-title-alert-box')}<i class=\"fas fa-gamepad composer\"/></h4>\n                        <p className=\"desciption-alert\">{app.translator.trans('justoverclock-igdb-api.forum.game-title-alert-box-description')}</p>\n                    </div>\n                </div>\n            );\n        }\n    });\n    extend(IndexPage.prototype, 'navItems', (navItems) => {\n        navItems.add(\n            'upcomingGames',\n            <LinkButton href={app.route('upcomingGames')} icon=\"fas fa-gamepad\">\n                {app.translator.trans('justoverclock-igdb-api.forum.gamesPage')}\n            </LinkButton>,\n            100\n        );\n\n        return navItems;\n    });\n    extend(DiscussionHero.prototype, 'oncreate', function () {\n        const RawgKey = app.forum.attribute('justoverclock-igdb-api.RawgApiKey');\n        const discGameTitle = this.attrs.discussion.title().split(/\\s+/).join('-');\n        const isLoggedIn = app.session.user;\n\n        // gestiamo gli errori nella risposta\n        function handleErrors(response) {\n            if (response.ok === undefined) {\n                throw Error(response.statusText);\n            }\n            return response;\n        }\n\n        // per evitare troppe richieste all'api, effettuiamo fetch solo per chi è registrato\n        if (isLoggedIn) {\n            const GameApi = fetch('https://api.rawg.io/api/games/' + discGameTitle + '?page_size=1&page=1&key=' + RawgKey)\n                .then(handleErrors)\n                .then((response) => response.json())\n                .then((data) => {\n                    this.gameDet = data;\n                    console.log(data);\n                    m.redraw();\n                })\n                .catch((error) => console.log('This Game title does not exist ;) =>', discGameTitle));\n        }\n    });\n    extend(DiscussionHero.prototype, 'items', function (items) {\n        if (typeof this.gameDet === 'undefined') return;\n\n        // css per la barra punteggi e l'immagine di background\n        let score = 'width:' + this.gameDet.metacritic + '%';\n        let bgGame = 'background-image:url(' + this.gameDet.background_image + ');';\n\n        if (this.gameDet.metacritic === null) {\n            this.gameDet.metacritic = 0;\n            score = 'width:0%';\n        }\n        // non mostriamo l'html se non c'è nulla da mostrare\n        if (this.gameDet.description_raw === undefined) {\n            return;\n        } else {\n            items.remove('title');\n            items.add(\n                'gameDetails',\n                <div className=\"gameWrapper\">\n                    <div className=\"container-fluid\">\n                        <div className=\"row\">\n                            <div className=\"col-12 mt-3\">\n                                <div className=\"card\">\n                                    <div className=\"card-horizontal\">\n                                        <div className=\"img-square-wrapper\" style={bgGame}>\n                                            <div className=\"metaScore\">\n                                                {app.translator.trans('justoverclock-igdb-api.forum.metacriticScore')}: {this.gameDet.metacritic}\n                                            </div>\n                                            <div className=\"meter green nostripes\">\n                                                <span id=\"progresscore\" style={score} />\n                                            </div>\n                                        </div>\n                                        <div className=\"card-body\">\n                                            <h1 className=\"card-title\">{this.gameDet.name}</h1>\n                                            <h4 className=\"gamesubtitle\">\n                                                {app.translator.trans('justoverclock-igdb-api.forum.publisher')}: {this.gameDet.developers[0].name} -{' '}\n                                                {app.translator.trans('justoverclock-igdb-api.forum.genres')}: {this.gameDet.genres[0].name}\n                                            </h4>\n                                            <p className=\"card-text\" id=\"google_translate_element\" translate=\"yes\">\n                                                {this.gameDet.description_raw}\n                                            </p>\n                                            <p className=\"linktometac\">\n                                                <i className=\"fas fa-link metacr\" />\n                                                <a\n                                                    href={this.gameDet.metacritic_url}\n                                                    target=\"_blank\"\n                                                    rel=\"nofollow\"\n                                                    title={this.gameDet.metacritic_url}\n                                                >\n                                                    {app.translator.trans('justoverclock-igdb-api.forum.seeOnMetaCritic')}\n                                                </a>\n                                                <i className=\"fas fa-globe-europe offweb\" />\n                                                <a href={this.gameDet.website} target=\"_blank\" rel=\"nofollow\" title={this.gameDet.website}>\n                                                    {app.translator.trans('justoverclock-igdb-api.forum.offwebsite')}\n                                                </a>\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"userRatings\">\n                        <li className=\"listofRatings\">\n                            <i className=\"fas fa-circle excellent\" />\n                            Exceptional ({this.gameDet.ratings[1].count})\n                        </li>\n                        <li className=\"listofRatings\">\n                            <i className=\"fas fa-circle recommended\" />\n                            Recommended ({this.gameDet.ratings[0].count})\n                        </li>\n                        <li className=\"listofRatings\">\n                            <i className=\"fas fa-circle meh\" />\n                            Meh ({this.gameDet.ratings[2].count})\n                        </li>\n                        <li className=\"listofRatings\">\n                            <i className=\"fas fa-circle skip\" />\n                            Skip ({this.gameDet.ratings[3].count})\n                        </li>\n                    </div>\n                </div>\n            );\n        }\n    });\n});\n"],"sourceRoot":""}